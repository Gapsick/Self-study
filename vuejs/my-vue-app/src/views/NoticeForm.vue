<script setup>
import { ref } from "vue";
import { useBoardStore } from "@/store/boardStore";
import { useRouter } from "vue-router";

const boardStore = useBoardStore();
const router = useRouter();

const title = ref("");
const content = ref("");

const submitNotice = async () => {
  if (!title.value || !content.value) {
    alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.");
    return;
  }

  await boardStore.addPost(title.value, content.value); // âœ… Piniaì—ì„œ ê²Œì‹œë¬¼ ì¶”ê°€
  router.push("/"); // âœ… MainPageë¡œ ì´ë™ (ë°ì´í„°ëŠ” ì´ë¯¸ Piniaì—ì„œ ê´€ë¦¬ ì¤‘)
};
</script>

<template>
  <div>
    <h2>ğŸ“Œ ê³µì§€ì‚¬í•­ ì‘ì„±</h2>
    <input v-model="title" placeholder="ì œëª© ì…ë ¥" />
    <textarea v-model="content" placeholder="ë‚´ìš© ì…ë ¥"></textarea>
    <button @click="submitNotice">ë“±ë¡</button>
  </div>
</template>
